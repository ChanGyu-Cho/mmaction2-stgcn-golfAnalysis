# Cleaned requirements for Docker base image
# Trimmed from user's pip freeze and adjusted to resolve conflicts

# Core
addict==2.4.0
certifi==2022.12.7
cffi==1.17.1
charset-normalizer==2.1.1
click==8.1.8
colorama==0.4.6
decorator==4.4.2
filelock==3.14.0
idna==3.4
Jinja2==3.1.4
MarkupSafe==2.1.5
packaging==24.2
pillow==10.2.0
pycparser==2.22
PyYAML==6.0.2
requests==2.28.2
urllib3==1.26.13
typing_extensions==4.7.1
six==1.16.0

# Numerical / scientific
# CRITICAL: Pin NumPy to EXACT local version (1.24.3) for deterministic results
# NumPy version affects floating point operations and array manipulations
numpy==1.24.3
scipy==1.10.1
pandas==2.0.3
scikit-learn==1.7.2

# MMAction2 & OpenMMLab
mmengine==0.10.7
mmcv==2.1.0
openmim==0.3.9

# Video / image
# CRITICAL: OpenCV version matching strategy
# Local Windows uses 4.12.0 with NumPy 1.24.3, but Linux builds of OpenCV 4.12 require NumPy 2+
# Since mmcv/mmengine require NumPy <2, we use OpenCV 4.11 (closest compatible version)
# The interpolation/processing differences between 4.11 and 4.12 are minimal compared to 4.6-4.10
opencv-python==4.11.0.86
decord==0.6.0
einops==0.8.1
moviepy==1.0.3
imageio==2.35.1
imageio-ffmpeg==0.5.1

# Visualization
matplotlib==3.7.5
contourpy==1.1.1
fonttools==4.57.0
kiwisolver==1.4.7
pyparsing==3.1.4
cycler==0.12.1

# Utilities
tqdm==4.65.2
rich==13.4.2
tabulate==0.9.0
termcolor==2.4.0
markdown-it-py==3.0.0
Markdown==3.7

# API (FastAPI server)
# API dependencies merged from ./api_src/requirements.txt to centralize Docker installs
# moviepy is already present under Video / image, so only add FastAPI stack here
fastapi>=0.95.0
uvicorn[standard]>=0.22.0
pydantic>=1.10

# Filesystems / IO
fsspec==2024.6.1

# Notes:
# - PyTorch and torchvision are provided by the base image; do NOT include torch/torchvision/torchaudio.
# - Avoid including Windows-specific or editable/local entries.
# - If pip still fails during resolution, loosen pinned versions for numpy/opencv or remove the explicit numpy pin.